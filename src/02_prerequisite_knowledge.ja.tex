\chapter{hoge}
\section{宇宙通信におけるインターネット技術の適用性とDTN}
近年、月や火星の宇宙探査ミッションが本格化し、NASA中心のアルテミス計画citenasa2020は2025年から
有人ミッションも予定している。 これらの計画に伴い、 今後は月・火星にある衛星やさまざまな通信機器、 
デバイスなどの数が増加する可能性が高い。 従来までの宇宙ミッションにおいて宇宙のノードと地球との通信は、 
地球上にある各国の大型アンテナを利用し、 一対一の通信を行っていた。 しかしこのような計画でノードの数が増加する場合、
通信ニーズに対応するためには宇宙にも多対多のノードで通信が可能なインターネットが必要となる。 
既存のインターネットはEnd-to-Endの疎通性が確保できている環境で通信を行うことが多いが、 
宇宙で通信を行う際には頻繁な断絶と大きな遅延が問題となる。 中継ノードとなる様々な宇宙機は
宇宙空間での位置が常に変化しており、天体の影に入るなどで断絶が頻繁に起こる。また通信の際には地球月間でも片道1。3秒、 
地球火星間では太陽に対する２天体の公転の状況によって、 片道4分から20分程度の遅延が想定されている。 
End-to-EndでTCPを用いた通信を行う際には、 3-way-handshakeなどを含め
これらの天体間を複数回往復する通信を行う必要があり、遅延はさらに大きな時間になる。 

そのため宇宙のインターネットにはDelay and Disruption Tolerant Networking（DTN）の
技術を利用することが考えられている。 DTNの技術の一つにBundle Protocol（BP）があり、 
BPでは通信されるデータはバンドルという可変長のデータとして転送される。 
中間ノードでは経路上の次のノードへ転送可能なタイミングまでバンドルを蓄積することが可能になっているため、 
End-to-Endの通信疎通性が確保できていない場合でも、 この蓄積による転送を行うことにより断絶に強い通信ができる。
 またトランスポートレイヤにUDPなどのプロトコルを用いることで、 
 比較的遅延を抑えて通信することもできる。 

\subsection{Bundle Protocol}
Bundle Protocol （BP）は、DTNにおける主要な通信技術で遅延・断絶が起きやすい環境でデータを確実に伝送するために設計された。

Bundle Protocolは、 データを「バンドル」と呼ばれる可変長の単位として送信する。このバンドルは、 
送信元から目的地までの途中で複数の中継を経ても、全体としてデータを確実に届けるためのものである。 
また、このプロトコルは「ストア＆フォワード」方式を利用しており、 各中継ノードが受け取ったバンドルを一時的に保存し、 
次のノードと通信できるタイミングが来るまで待機する。 これにより、通信が一時的に途絶えてもデータが失われることなく、 次のノードへと送信される。

\subsection{Convergence LayerとLTP}
DTNでは多様なプロトコルがトランスポートレイヤ以下の層で使用することを想定しており、 図 ref中のConvergence Layerは
それらの違いを吸収することを目的としている。 Convergence Layer Protocol（CLP）としては、 
利用する下位レイヤプロトコルにより、
- sTCP-based CLP （TCPCL）
- User Datagram Protocol （UDP）
- based CLP （UDPCL）、 Saratoga CLP
- Licklider Transmission Protocol （LTP）
- based CLP （LTPCL）
- Licklider Transmission Protocol（LTP）などがある。 
LTP citerfc5326はコンバージェンスレイヤのプロトコルの一つであり、 再送制御の機能も実装している。
 LTPをコンバージェンスレイヤに用いる場合、 トランスポートレイヤにUDPを用いることがあるほか、 
 宇宙での通信においてLTPが直接リンク層にアクセスすることも想定されている。
\subsection{既存のDTN実装}
既にいくつかの研究機関などによりDTN技術を実装したソフトウェアがリリースされている。 いくつかの例を以下に示す。 

% Interplanetary Overlay Network DTN（ION-DTN）:NASA/JPL
% HDTN:NASA/Glenn research center
% DTN ME:Marshall Space Flight center
% μD3TN:D3TN GmbH
% IONe:Experimental ION Scott Burleigh United States 
% DTN7/Go:University of Marburg German

これらのDTNソフトウェアは、 基本的に通信内容からバンドルへのエンコード・デコード、 
中間ノードでのバンドルのままでの蓄積転送を可能にしているが、 
Convergence Layerが対応しているトランスポートレイヤプロトコルの種類などの点で異なる。 


\section{宇宙インターネットにおけるルーティング}
\subsection{衛星間のContact}
DTNは、 通信の遅延や途絶が発生する環境でデータを確実に届けるための技術である。このDTNにおいて、
 通信が可能な時間やタイミングを「Contact」と呼んでいる。 Contactとは、 
 ２つのノード間で直接通信が可能な期間やその条件を指し、 データを送受信できる時間を意味している。

DTNを使用する環境では、 常に接続が確立されている訳ではなく、 ノード間の通信が可能な期間が限られていることが一般的である。
したがって、 このContactを正確に把握することが、 効率的なデータ転送やネットワークの最適化において極めて重要な要素となっている。
例えば、 地球と宇宙探査機の間の通信を考えてみると。 両者が視界に入る時間にだけデータを送信することができる。 この時間がContactにあたる。 

\subsection{Contact Graph Routing}
既に述べた通り既存のDTN実装は複数あるが、これらのDTN実装におけるルーティング手法は、
主にContact Graph Routing（CGR）が用いられ、 
CCSDSではSCHEDULE-AWARE BUNDLE ROUTINGとして標準化されている。 
宇宙におけるノード間の通信可能な機会は物理的な軌道の計算により予測可能であり、 
CGRはノードの通信可能機会とそのスループットなどが書かれたContact Planを用いて
\subsection{IPN address}
IPNアドレス（Interplanetary Networking Address）は、 DTN環境で使用されるアドレス形式で、
宇宙通信のためのネットワーク識別とエンドポイントの識別を可能にするものである。 従来のインターネットプロトコルアドレス（IPアドレス）は、
リアルタイムでの通信や短い遅延を前提とした設計であるため、 宇宙空間における遅延や断絶が発生する環境では適切に機能しない。
DTNのアーキテクチャは、 これらの遅延や断絶を前提としており、 IPネットワークとは異なる方法でデータを伝送するため、
IPNアドレスが必要とされている。 さらに、 IPNアドレスは地上のインターネットや宇宙のネットワークなど、
異なるアドレッシングスキームを持つネットワークの統合する役割としても機能する。

IPNアドレスは「ipn:ノード番号. サービス番号」という形式で記述され、 これにより特定の宇宙船や装置が個別に識別される。 

\section{宇宙でのトポロジーの変化}