\chapter{序論}
\section{近年の宇宙開発の進展}
宇宙開発は近年大きく進展している。1970年代に米ソによって月探査が進展した後、その後月面、特に有人による探査は中断されていたが、
2004年にブッシュ大統領は米国の新宇宙政策を発表し、2020年までに米国が再び宇宙飛行士を月面に送り、有人滞在施設の建設することを提唱した。\cite{久保田2009}
この計画は実際には中断されたものの、2017年にトランプ大統領が有人月探査・火星探査を進める大統領令に署名し、2019年にアルテミス計画として発表された。\cite{nasa2020}
2020年には「アルテミス計画を含む広範な宇宙空間の民生探査・利用の諸原則について、関係各国の共通認識を示すこと」を目的にアルテミス合意\cite{artemis_agreement1}も成立し、
当初日本・アメリカ・カナダ・イギリス・イタリア・オーストラリア・ルクセンブルク・アラブ首長国連邦の8カ国が参加した。\cite{artemis_agreement2}
加盟国はその後増加し、2024年時点で40カ国である。\cite{artemis_agreement3}
このように近年宇宙開発は急激に進展しており、その進展について以下の\ref{月・火星の探査計画}、
、\ref{深宇宙の探査計画}、\ref{民間事業者の宇宙事業への参画}の三つの視点から述べる。
\subsection{月・火星の探査計画}
\label{月・火星の探査計画}
このセクションでは、西側のアルテミス計画、及び中露の月・火星探査計画とそのタイムラインについて詳述する。
\subsection{深宇宙の探査計画}
\label{深宇宙の探査計画}
このセクションでは、火星以遠の探査計画、特に小惑星探査やそのほか木星土星の衛星探査についても詳述する。

\subsection{民間事業者の宇宙事業への参画}
\label{民間事業者の宇宙事業への参画}
このセクションでは、2000年代の民間事業者の宇宙事業への参入について詳述する。
特に、スペースX、ブルーオリジン、ヴァージンギャラクティックなどの宇宙への輸送能力をもつ企業の成長について述べる。
宇宙ビジネスの事業規模の拡大を示すとともに、今後地球軌道でのビジネスだけでなく、月・火星でのビジネスも進展し、
そこでの通信需要が生まれるという話を記述する。
メモ:JAXAのイノベーションハブについても述べる

\section{宇宙通信におけるインターネット技術の適用性}
これらの宇宙開発計画に伴い、 月・火星の地表及びその近傍の空間に多くの人や宇宙機、その他機材が存在するようになり、
天体内・天体間での通信需要が大きくなることが予想される。 
従来までの宇宙ミッションにおいて宇宙のノードと地球との通信は、 地球上にある各国の大型アンテナを利用し、 一対一の通信を行っていた。
しかしこのような計画でノードの数が増加する場合、通信ニーズに対応するためには宇宙にも多対多のノードで通信が可能な宇宙インターネットが必要となる。 
これに向け、既存のインターネットの技術を宇宙インターネットに向け改良し活用することが検討されているが、
当然ながら宇宙環境は地球とは環境が大きく異なり、特に以下の部分に関して考慮が必要となる。

\section{通信における宇宙の環境}
宇宙における通信やネットワークに関して、地球とは次のような大きな違いが存在する。
\subsection{大きな遅延のある通信環境}
宇宙での通信は既存のインターネットにおける通信の遅延に比較して非常に大きい。
東京-ニューヨーク間であれば、伝搬遅延のみを考慮した場合、片道50ms以内で通信が可能である一方、宇宙における通信の際には地球月間でも片道1。3秒、
地球火星間では太陽に対する2天体の公転の状況によって変動するが最大20分程度の遅延が想定されている。
End-to-EndでTCPを用いた通信を行う際には、 3-way-handshakeなどを含めこれらの天体間を複数回往復する通信を行う必要があり、 
遅延はさらに大きな時間になる。 
\cite{McBrayer2022}
\subsection{ネットワークトポロジーの変動と間欠的接続}
\ref{subsection:ネットワークトポロジーの変動と間欠的接続}
宇宙のインターネットにおいて、ネットワークを構成するノードには多くの宇宙機が含まれている。
これらのノードは当然ながら宇宙空間での位置が常に変化しており、
 天体の影に入るなどで断絶が頻繁に起こる。 

\section{宇宙通信におけるインターネット技術の適用性とDTN}
これらの宇宙特有の環境におけるインターネットのコンセプトとして、Delay and Disruption Tolerant Networking（DTN）の
が構想されている。DTNの中心となる技術の一つにBundle Protocol（BP）があり、 
BPでは通信されるデータはバンドルという可変長のデータとして転送される。 
中間ノードでは経路上の次のノードへ転送可能なタイミングまでバンドルを蓄積することが可能になっているため、 
End-to-Endの通信疎通性が確保できていない場合でも、 この蓄積による転送を行うことにより断絶に強い通信ができる。
またトランスポートレイヤにUDPなどのプロトコルを用いることで、 比較的遅延を抑えて通信することもできる。

\cite{bundle_protocol_architecture}

\begin{figure}[tbh]
    \centering
    \includegraphics[width=0.7\textheight]{img/dtnprotocolstack.pdf}
    \caption{DTNを搭載したノード間のみでの通信 \ （参考文献\cite{bundle_protocol_architecture}Figure1から引用）　\図中のConvergence Layer（CL）については2章で説明する.}
    \label{fig:dtnprotocolstack}
\end{figure}
\section{DTNを構成する技術}
本章ではDTNを構成する技術について述べる。
\subsection{Bundle Protocol}
上記でも述べたBPは、DTNにおける主要な通信技術で遅延・断絶が起きやすい環境でデータを確実に伝送するために設計された。

このバンドルは、 送信元から目的地までの途中で複数の中継を経ても、全体としてデータを確実に届けるためのものである。 
また、このプロトコルは「ストア＆フォワード」方式を利用しており、 各中継ノードが受け取ったバンドルを一時的に保存し、 
次のノードと通信できるタイミングが来るまで待機する。 これにより、通信が一時的に途絶えてもデータが失われることなく、 次のノードへと送信される。

\subsection{Convergence LayerとLTP}
DTNでは多様なプロトコルがトランスポートレイヤ以下の層で使用することを想定しており、 図\ref{fig:dtnprotocolstack}中のConvergence Layerは
それらの違いを吸収することを目的としている。 Convergence Layer Protocol（CLP）としては、 
利用する下位レイヤプロトコルにより、

\begin{itemize}
    \item TCP-based CLP (TCPCL)
    \item User Datagram Protocol (UDP)-based CLP (UDPCL)
    \item Saratoga CLP
    \item Licklider Transmission Protocol (LTP)-based CLP (LTPCL)
\end{itemize}
などがある。 

LTP\cite{rfc5326}はコンバージェンスレイヤのプロトコルの一つであり、 再送制御の機能も実装している。
LTPをコンバージェンスレイヤに用いる場合、 トランスポートレイヤにUDPを用いることがあるほか、 
宇宙での通信においてLTPが直接リンク層にアクセスすることも想定されている。
\subsection{既存のDTN実装}
既にいくつかの研究機関などによりDTN技術を実装したソフトウェアがリリースされている。 いくつかの例を以下に示す。 

\begin{itemize}
    \item Interplanetary Overlay Network DTN（ION-DTN）: NASA/JPL
    \item HDTN : NASA/Glenn research center
    \item DTN ME : Marshall Space Flight center
    \item \textmu D3TN : D3TN GmbH
    \item IONe : Experimental ION Scott Burleigh United States 
    \item DTN7/Go : University of Marburg German
\end{itemize}

これらのDTNソフトウェアは、 基本的に通信内容からバンドルへのエンコード・デコード、 
中間ノードでのバンドルのままでの蓄積転送を可能にしているが、 
Convergence Layerが対応しているトランスポートレイヤプロトコルの種類などの点で異なる。 


\section{宇宙インターネットにおけるルーティング}
\ref{}
\subsection{衛星間のContact}
DTNはこのDTNにおいて、
通信が可能な時間やタイミングを「Contact」と呼んでいる。 Contactとは、 
２つのノード間で直接通信が可能な期間やその条件を指し、 データを送受信できる時間を意味している。

DTNを使用する環境では、 常に接続が確立されている訳ではなく、 ノード間の通信が可能な期間が限られていることが一般的である。
したがって、 このContactを正確に把握することが、 効率的なデータ転送やネットワークの最適化において極めて重要な要素となっている。
例えば、 地球と宇宙探査機の間の通信を考えてみると。 両者が視界に入る時間にだけデータを送信することができる。 この時間がContactにあたる。 

\subsection{Contact Graph Routing}
既に述べた通り既存のDTN実装は複数あるが、これらのDTN実装におけるルーティング手法は、
主にContact Graph Routing（CGR）が用いられ、 
CCSDSではSCHEDULE-AWARE BUNDLE ROUTINGとして標準化されている。 
宇宙におけるノード間の通信可能な機会は物理的な軌道の計算により予測可能であり、 
CGRはノードの通信可能機会とそのスループットなどが書かれたContact Planを用いて
\subsection{IPN address}
IPNアドレス（Interplanetary Networking Address）は、 DTN環境で使用されるアドレス形式で、
宇宙通信のためのネットワーク識別とエンドポイントの識別を可能にするものである。 従来のインターネットプロトコルアドレス（IPアドレス）は、
リアルタイムでの通信や短い遅延を前提とした設計であるため、 宇宙空間における遅延や断絶が発生する環境では適切に機能しない。
DTNのアーキテクチャは、 これらの遅延や断絶を前提としており、 IPネットワークとは異なる方法でデータを伝送するため、
IPNアドレスが必要とされている。 さらに、 IPNアドレスは地上のインターネットや宇宙のネットワークなど、
異なるアドレッシングスキームを持つネットワークの統合する役割としても機能する。

IPNアドレスは「ipn:ノード番号. サービス番号」という形式で記述され、 これにより特定の宇宙船や装置が個別に識別される。 

\section{宇宙でのトポロジーの変化}

\section{本研究の目的と構成}
上述の通り、DTN技術は蓄積転送を特徴とし、宇宙環境に特有の長時間の遅延及び通信経路の断絶に強い通信技術である。
しかしDTN技術は今まで実際に宇宙空間で使用された実績・及び使用される計画が少なかったこともあり、
実際の運用においては未だ多くの課題が残されている。
DTNにおけるルーティングはそれらの課題の多い分野の一つであり、詳細は
\ref{chap:prerequisite_knowledge}章で述べるがアドレスの構造、階層化など多くの点で技術標準が定まっていない。
本研究では特に、DTNの実装において現状デファクトスタンダードとなっているContact Graph Routing（CGR）に注目し、
そのために必要なコンタクトプランの配送の